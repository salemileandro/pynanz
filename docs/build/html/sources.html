<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Documentation &mdash; Pynanz  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to Pynanz’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Pynanz
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#stockdata-class">StockData (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meanvariance-class">MeanVariance (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pynanz.indicators">indicators (module)</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Pynanz</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/sources.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="documentation">
<h1>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline"></a></h1>
<div class="section" id="stockdata-class">
<h2>StockData (class)<a class="headerlink" href="#stockdata-class" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pynanz.Market">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pynanz.</span></span><span class="sig-name descname"><span class="pre">Market</span></span><a class="reference internal" href="_modules/pynanz/Market.html#Market"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market" title="Permalink to this definition"></a></dt>
<dd><p><cite>Market</cite> is a class for downloading, storing and handling market data. Data is downloaded from yahoofinance by
using <a class="reference external" href="https://github.com/ranaroussi/yfinance">yfinance</a> as backend. Two types of data are downloaded</p>
<ul class="simple">
<li><p>Daily <em>Open, High, Low, Close, Volume (OHLCV)</em> of diverse financial assets (e.g. stocks, ETFs, …) that is
stored in the attribute <cite>self.data</cite> of type pd.DataFrame.</p></li>
<li><p>Metadata associated to the asset (e.g. sector type) that is stored in the attribute <cite>self.metadata</cite> of type
pd.DataFrame.</p></li>
</ul>
<p>For <cite>self.data</cite>, the columns are multi-indexed, i.e. each column label is a tuple of len=2 whose first entry is the
ticker symbol (e.g. “AAPL”, “GOOG”) and second the attribute (e.g. “open”, “high”). Diverse financial indicators
such as exponentially moving averages (EMA) or moving average convergence divergence (MACD) can also be computed.</p>
<p><strong>Note that:</strong></p>
<ul class="simple">
<li><p>Only daily data can be retrieved.</p></li>
<li><p>Ticker symbols are fully capitalized, e.g. “AAPL” (not “aapl”).</p></li>
<li><p>Attribute are lower case, e.g “close” (not “Close”/”CLOSE”).</p></li>
</ul>
<p><strong>List of attributes:</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self.data</strong> (<em>pd.DataFrame</em>) – DataFrame containing the data.</p></li>
<li><p><strong>self.tickers</strong> (<em>list</em>) – List of ticker symbols considered in the self.data pd.DataFrame,
e.g. [“AAPL”, “GOOG”, “USFD”, “ARKF”]. Symbols are fully capitalized.</p></li>
<li><p><strong>self.attributes</strong> (<em>list</em>) – List of attributes available, e.g. [“close”, “open”, …].</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor for the StockData class. The object needs to be initialized using either</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pynanz.Market.download" title="pynanz.Market.download"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.Market.download()</span></code></a></p></li>
<li><p><a class="reference internal" href="#pynanz.Market.load" title="pynanz.Market.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.Market.load()</span></code></a> (if a call to <a class="reference internal" href="#pynanz.Market.save" title="pynanz.Market.save"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.Market.save()</span></code></a> was done before).</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.download">
<span class="sig-name descname"><span class="pre">download</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tickers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pandas.Timestamp</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pandas.Timestamp</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pandas.Timestamp</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_nan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.download"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.download" title="Permalink to this definition"></a></dt>
<dd><p>Download data from yahoo finance using <a class="reference external" href="https://github.com/ranaroussi/yfinance">yfinance</a> as backend.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tickers</strong> (<em>str</em><em>,</em><em>List</em><em>[</em><em>str</em><em>]</em>) – List of str or str that contains the ticker symbols of the
considered assets, e.g. [“AAPL”, “GOOG”, “USFD”, “ARKF”]. No default.</p></li>
<li><p><strong>start</strong> (<em>str</em><em>,</em><em>pd.Timestamp</em>) – Start date for fetching the data. If None, the API will fetch data as far in
the past as it can. Default = None.</p></li>
<li><p><strong>end</strong> (<em>str</em><em>,</em><em>pd.Timestamp</em>) – End date for fetching the data. If unspecified, it is set to today via
<cite>pd.Timestamp.ceil(pd.Timestamp.today(), “D”)</cite>. Default = None.</p></li>
<li><p><strong>threshold_date</strong> (<em>str</em><em>,</em><em>pd.Timestamp</em>) – If defined, assets that have the first record of historical data that
is newer than <cite>threshold_date</cite> are ignored.</p></li>
<li><p><strong>remove_nan</strong> (<em>bool</em>) – If True, dates with NaN entries are removed. Default is True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.download_metadata">
<span class="sig-name descname"><span class="pre">download_metadata</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.download_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.download_metadata" title="Permalink to this definition"></a></dt>
<dd><p>Download the metadata associated to the tickers stored is self.tickers. If self.tickers is None, the call will
fail.
(this functionality is still in development)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.ema">
<span class="sig-name descname"><span class="pre">ema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'close'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_compute</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.ema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.ema" title="Permalink to this definition"></a></dt>
<dd><p>For a given target (default=”close”), computes the Exponentially Moving Average (EMA) for every column
(“ticker_symbol”, “target”) of the pd.DataFrame self.data. This function applies
<a class="reference internal" href="#pynanz.indicators.ema" title="pynanz.indicators.ema"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.indicators.ema()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>span</strong> (<em>int</em>) – Time span, a positive integer. Default=10.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Name of the targeted attribute (e.g. “close”, “open”, …). Default=”close”.</p></li>
<li><p><strong>force_compute</strong> (<em>bool</em>) – If False and self.data contains already the columns, the computation is not executed.
Default=True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p>ValueError if <cite>span</cite> &lt;= 0.</p></li>
<li><p>ValueError if <cite>target</cite> is not a valid attribute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.future_return">
<span class="sig-name descname"><span class="pre">future_return</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'close'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_compute</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.future_return"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.future_return" title="Permalink to this definition"></a></dt>
<dd><p>For a given target (default=”close”), computes the future return over every (“ticker_symbol”, “target”)
columns of the pd.DataFrame self.data. This function applies <a class="reference internal" href="#pynanz.indicators.future_return" title="pynanz.indicators.future_return"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.indicators.future_return()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>horizon</strong> (<em>int</em>) – Time horizon, a positive integer. Default=1.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Name of the targeted attribute (e.g. “close”, “open”, …). Default=”close”.</p></li>
<li><p><strong>force_compute</strong> (<em>bool</em>) – If False and self.data contains already the columns, the computation is not executed.
Default=True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p>ValueError if <cite>horizon</cite> &lt;= 0.</p></li>
<li><p>ValueError if <cite>target</cite> is not a valid attribute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.get_return">
<span class="sig-name descname"><span class="pre">get_return</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">add_cash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.get_return"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.get_return" title="Permalink to this definition"></a></dt>
<dd><p>Return a pd.DataFrame of daily returns</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.is_trading_day">
<span class="sig-name descname"><span class="pre">is_trading_day</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.date</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pandas.Timestamp</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.is_trading_day"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.is_trading_day" title="Permalink to this definition"></a></dt>
<dd><p>Check if the date is an actual trading day, i.e. if it is included in the self.data.index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>date</strong> (<em>datetime.date</em><em>,</em><em>pd.Timestamp</em>) – Date to check. Can be a datetime.date object or a pd.Timestamp object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the date has trading date, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.load">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.load" title="Permalink to this definition"></a></dt>
<dd><p>Load data from a pickle file. Need <code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.StockData.save()</span></code> to be called in a previous run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to the pickle file, e.g. <cite>“./market_data.pkl”</cite>. No default.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pynanz.Market object instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.macd">
<span class="sig-name descname"><span class="pre">macd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">short_span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">26</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'close'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_compute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.macd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.macd" title="Permalink to this definition"></a></dt>
<dd><p>For a given target (default=”close”), computes the Moving Average Convergence Divergence (MACD) indicator over
every (“ticker_symbol”, “target”) columns of the pd.DataFrame self.data. This function applies
<a class="reference internal" href="#pynanz.indicators.macd" title="pynanz.indicators.macd"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.indicators.macd()</span></code></a>.</p>
<p>This functions creates three new colums: f”macd_{<cite>short_span</cite>}_{<cite>long_span</cite>}_{<cite>signal_span</cite>}”,
f”sig_macd_{<cite>short_span</cite>}_{<cite>long_span</cite>}_{<cite>signal_span</cite>}” and
f”hist_macd_{<cite>short_span</cite>}_{<cite>long_span</cite>}_{<cite>signal_span</cite>}”, which are the MACD, signal and histogram
respectively. If the target is not “close”, the target name will be prepended.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>short_span</strong> (<em>int</em>) – Span for the fast EMA curve. Default=12.</p></li>
<li><p><strong>long_span</strong> (<em>int</em>) – Span for the slow EMA curve. Default=26.</p></li>
<li><p><strong>signal_span</strong> (<em>int</em>) – Span for the signal line. Default=9.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Target column to compute the indicator. Default=”close”.</p></li>
<li><p><strong>force_compute</strong> (<em>bool</em>) – If False and self.data contains already the columns, the computation is not executed.
Default=True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.newest_date">
<span class="sig-name descname"><span class="pre">newest_date</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.newest_date"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.newest_date" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Newest date which is the last index of the the pd.DataFrame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.oldest_date">
<span class="sig-name descname"><span class="pre">oldest_date</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.oldest_date"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.oldest_date" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Oldest date which is the first index of the the pd.DataFrame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.past_return">
<span class="sig-name descname"><span class="pre">past_return</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'close'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_compute</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.past_return"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.past_return" title="Permalink to this definition"></a></dt>
<dd><p>For a given target (default=”close”), computes the past return over every (“ticker_symbol”, “target”)
columns of the pd.DataFrame self.data. This function applies <a class="reference internal" href="#pynanz.indicators.past_return" title="pynanz.indicators.past_return"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.indicators.past_return()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>horizon</strong> (<em>int</em>) – Time horizon, a positive integer. Default=1.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Name of the targeted attribute (e.g. “close”, “open”, …). Default=”close”.</p></li>
<li><p><strong>force_compute</strong> (<em>bool</em>) – If False and self.data contains already the columns, the computation is not executed.
Default=True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p>ValueError if <cite>horizon</cite> &lt;= 0.</p></li>
<li><p>ValueError if <cite>target</cite> is not a valid attribute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.save" title="Permalink to this definition"></a></dt>
<dd><p>Save data to a pickle file (pd.DataFrame.to_pickle call). Retrieve data using <code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.StockData.load()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to the pickle file, e.g. <cite>“./stock_data.pkl”</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.Market.stochastic">
<span class="sig-name descname"><span class="pre">stochastic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'close'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_compute</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/Market.html#Market.stochastic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.Market.stochastic" title="Permalink to this definition"></a></dt>
<dd><p>Computes the stochastic indicator over every (“ticker_symbol”, “close”) columns of the pd.DataFrame
self.data. This function applies <a class="reference internal" href="#pynanz.indicators.stochastic" title="pynanz.indicators.stochastic"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.indicators.stochastic()</span></code></a>.</p>
<p>This functions creates two new colums: f”stochastic_{<cite>period</cite>}” and f”smoothed_stochastic_{<cite>period</cite>}”.
If the target is not “close”, the target name will be prepended.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>period</strong> (<em>int</em>) – Period defining the stochastic indicator. Default=14.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Target column to compute the indicator. Default=”close”.</p></li>
<li><p><strong>force_compute</strong> (<em>bool</em>) – If False and self.data contains already the columns, the computation is not executed.
Default=True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p>NotImplemented if target is not “close”.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="meanvariance-class">
<h2>MeanVariance (class)<a class="headerlink" href="#meanvariance-class" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pynanz.MeanVariance">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pynanz.</span></span><span class="sig-name descname"><span class="pre">MeanVariance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">risk_aversion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_cash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/MeanVariance.html#MeanVariance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.MeanVariance" title="Permalink to this definition"></a></dt>
<dd><p>Class to perform Mean-Variance analysis of a given set of asset. The cornerstone of this class is the
Mean-Variance optimization:</p>
<div class="math notranslate nohighlight">
\[\max_{\mathbf{w}} \Bigg( \sum_{i=1}^{N} w_i \mu_i
- \gamma \sum_{i=1}^{N}\sum_{j=1}^{N} w_i w_j \Sigma_{ij} \Bigg)\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathbf{w}\)</span> is the weight vector (portfolio allocation weight), <span class="math notranslate nohighlight">\(\mu_i = \mathbb{E}[r_i]\)</span>
the expected return for asset <em>i</em>, <span class="math notranslate nohighlight">\(\gamma\)</span> the risk aversion parameter and <span class="math notranslate nohighlight">\(\Sigma_{ij}\)</span> the <em>ij</em>
element of the covariance matrix (measure of risk). For more details, see the
<a class="reference external" href="../../../Notes/MeanVariance/MeanVariance.pdf">MeanVariance.pdf</a> file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pynanz.MeanVariance.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">risk_aversion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma_target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_cash</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/MeanVariance.html#MeanVariance.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.MeanVariance.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor for the MeanVariance object in which the parameters are set. To
Constructor for the MeanVariance object. In the constructor, the parameters are set. To effectively solve
the Mean-Variance Portfolio optimization, you need to call <a class="reference internal" href="#pynanz.MeanVariance.solve" title="pynanz.MeanVariance.solve"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.MeanVariance.solve()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.DataFrame</em>) – pd.DataFrame containing the historical price data. Index must be a date format,
the columns must be the ticker name.</p></li>
<li><p><strong>alpha</strong> (<em>float</em>) – Decay in the exponential weighting of historical data. Set alpha=0.0 for simple averaging.
Default = 0.0.</p></li>
<li><p><strong>risk_aversion</strong> (<em>float</em>) – Risk aversion parameter. Cannot be defined if <cite>sigma_target</cite> is not None.
Default = 10.0.</p></li>
<li><p><strong>sigma_target</strong> (<em>float</em>) – Annualized standard deviation target. Cannot be defined if <cite>risk_aversion</cite> is not
None. Solving for sigma_target requires bisection algorithm (more computationally demanding).
Default = None.</p></li>
<li><p><strong>period</strong> (<em>int</em>) – Number of data points to consider to compute average and covariance. Default = 5.</p></li>
<li><p><strong>max_weight</strong> (<em>float</em>) – Maximum weighting that an asset can have. Doesn’t apply to the risk-free CASH asset (if
considered, see <cite>add_cash</cite> parameter). Must be in [0; 1]. Default=0.5.</p></li>
<li><p><strong>horizon</strong> (<em>int</em>) – Horizon used to compute the return. See <a class="reference internal" href="#pynanz.indicators.past_return" title="pynanz.indicators.past_return"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.indicators.past_return()</span></code></a>. Default = 1.</p></li>
<li><p><strong>add_cash</strong> (<em>bool</em>) – If true, an extra asset named “CASH” is added as a risk-free, zero-return asset.
Default=True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.MeanVariance.bisection_solver">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bisection_solver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mu</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">risk_target</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/MeanVariance.html#MeanVariance.bisection_solver"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.MeanVariance.bisection_solver" title="Permalink to this definition"></a></dt>
<dd><p>Solve the same quadratic problem as <a class="reference internal" href="#pynanz.MeanVariance.solver" title="pynanz.MeanVariance.solver"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.MeanVariance.solver()</span></code></a> but targeting a specific value for
the risk <span class="math notranslate nohighlight">\(\sigma_p\)</span> using a bisection algorithm. The risk <span class="math notranslate nohighlight">\(\sigma_p\)</span> is defined as</p>
<div class="math notranslate nohighlight">
\[\sigma_p = \Bigg( \sum_{i=1}^{N}\sum_{j=1}^{N} w_i w_j \Sigma_{ij} \Bigg)^{1/2}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mu</strong> (<em>np.ndarray</em>) – Array of expected returns of shape (n_assets,) where n_assets is the number
of assets considered</p></li>
<li><p><strong>sigma</strong> (<em>np.ndarray</em>) – Covariance matrix of shape (n_assets, n_assets).</p></li>
<li><p><strong>risk_target</strong> (<em>float</em>) – Risk target parameter.</p></li>
<li><p><strong>max_weight</strong> (<em>np.ndarray</em>) – Array of shape (n_assets,) whose i <sup>th</sup> entry is the maximum allocation for
asset i. Default is None (internally handled as np.ones(shape=n_assets))</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>weights (np.ndarray), portfolio_return (float), portfolio_risk_squared (float) (similarly
to <a class="reference internal" href="#pynanz.MeanVariance.solver" title="pynanz.MeanVariance.solver"><code class="xref py py-func docutils literal notranslate"><span class="pre">pynanz.MeanVariance.solver()</span></code></a>).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.MeanVariance.solve">
<span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#pynanz.Market" title="pynanz.Market.Market"><span class="pre">pynanz.Market.Market</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'global'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.Timestamp</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.Timestamp</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/MeanVariance.html#MeanVariance.solve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.MeanVariance.solve" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> – </p></li>
<li><p><strong>mode</strong> – </p></li>
<li><p><strong>start_date</strong> – </p></li>
<li><p><strong>end_date</strong> – </p></li>
<li><p><strong>delta_date</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pynanz.MeanVariance.solver">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">solver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mu</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_weight</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/MeanVariance.html#MeanVariance.solver"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.MeanVariance.solver" title="Permalink to this definition"></a></dt>
<dd><p>Solve the quadratic problem</p>
<div class="math notranslate nohighlight">
\[\max_{\mathbf{w}} \Bigg( \sum_{i=1}^{N} w_i \mu_i
 - \gamma \sum_{i=1}^{N}\sum_{j=1}^{N} w_i w_j \Sigma_{ij} \Bigg)\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathbf{w}\)</span> is the weight vector to be optimized, <span class="math notranslate nohighlight">\(\boldsymbol{\mu}\)</span> the
expected return vector, <span class="math notranslate nohighlight">\(\boldsymbol{\Sigma}\)</span> the covariance matrix and <span class="math notranslate nohighlight">\(\gamma\)</span>
the risk aversion parameter.</p>
<p>The function returns:</p>
<ul class="simple">
<li><p>The portfolio weigths <span class="math notranslate nohighlight">\(\mathbf{w}\)</span> (np.ndarray)</p></li>
<li><p>The expected portfolio return <span class="math notranslate nohighlight">\(\mu_p = \sum_{i=1}^{N} w_i \mu_i\)</span> (float)</p></li>
<li><p>The expected portfolio risk (squared) <span class="math notranslate nohighlight">\(\sigma_p^2 = \sum_{i=1}^{N}\sum_{j=1}^{N} w_i w_j \Sigma_{ij}\)</span> (float)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mu</strong> (<em>np.ndarray</em>) – Array of expected returns of shape (n_assets,) where n_assets is the number
of assets considered</p></li>
<li><p><strong>sigma</strong> (<em>np.ndarray</em>) – Covariance matrix of shape (n_assets, n_assets).</p></li>
<li><p><strong>gamma</strong> (<em>float</em>) – Risk aversion parameter.</p></li>
<li><p><strong>max_weight</strong> (<em>np.ndarray</em>) – Array of shape (n_assets,) whose i <sup>th</sup> entry is the maximum allocation for
asset i. Default is None (internally handled as np.ones(shape=n_assets))</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>weights (np.ndarray), portfolio_return (float), portfolio_risk_squared (float)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pynanz.indicators">
<span id="indicators-module"></span><h2>indicators (module)<a class="headerlink" href="#module-pynanz.indicators" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pynanz.indicators.ema">
<span class="sig-prename descclassname"><span class="pre">pynanz.indicators.</span></span><span class="sig-name descname"><span class="pre">ema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/indicators.html#ema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.indicators.ema" title="Permalink to this definition"></a></dt>
<dd><p>Compute the exponential moving average (ema) of a pd.Series data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>pd.Series</em>) – Target data to compute the ema.</p></li>
<li><p><strong>span</strong> (<em>int</em>) – Span to compute the data. The decay alpha=2/(span+1).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The ema of x as a pd.Series.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError if span &lt;= 0. TypeError if type(x) != pd.Series.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynanz.indicators.future_return">
<span class="sig-prename descclassname"><span class="pre">pynanz.indicators.</span></span><span class="sig-name descname"><span class="pre">future_return</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/indicators.html#future_return"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.indicators.future_return" title="Permalink to this definition"></a></dt>
<dd><p>Compute the future return over a fix time <em>horizon</em> of the pd.Series <em>x</em>. The future return <em>y</em> is defined as</p>
<div class="math notranslate nohighlight">
\[y[t] = \frac{ x[t+horizon] - x[t]}{x[t]}\]</div>
<p>If <cite>x</cite> has units of value, then <cite>y</cite> can be interpreted as an investment return.
In general, <cite>y</cite> measure the change over time horizon <cite>horizon</cite> of the quantity <cite>x</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>pd.Series.</em>) – Target data to compute the future return.</p></li>
<li><p><strong>horizon</strong> (<em>int.</em>) – Time horizon, a positive integer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pd.Series y.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError if horizon &lt;= 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynanz.indicators.macd">
<span class="sig-prename descclassname"><span class="pre">pynanz.indicators.</span></span><span class="sig-name descname"><span class="pre">macd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">short_span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">26</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">9</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/indicators.html#macd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.indicators.macd" title="Permalink to this definition"></a></dt>
<dd><p>Compute the Moving Average Convergence Divergence (MACD) indicator. The indicator is defined by a fast ema of span
<cite>short_span</cite> and a slow ema of span <cite>long_span</cite>. The MACD curve is defined by MACD = short_ema - long_ema.
The signal line is defined as the ema of span <cite>signal_span</cite> of the MACD curve. The MACD histogram is defined as
the difference between the MACD curve and the signal line. If the histogram has positive value, it suggests a
bullish market while a negative histogram suggests a bearish market. Take care that the indicator is not perfect
(false positive/negative) and typically lags in time (detects momentum reversal after they happen).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>pd.Series</em>) – Target data to compute the macd.</p></li>
<li><p><strong>short_span</strong> (<em>int</em>) – Span for the fast EMA curve. Default=12.</p></li>
<li><p><strong>long_span</strong> (<em>int</em>) – Span for the slow EMA curve. Default=26.</p></li>
<li><p><strong>signal_span</strong> (<em>int</em>) – Span for the signal line. Default=9.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>MACD, signal_line, histogram, a 3D tuple.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynanz.indicators.past_return">
<span class="sig-prename descclassname"><span class="pre">pynanz.indicators.</span></span><span class="sig-name descname"><span class="pre">past_return</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/indicators.html#past_return"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.indicators.past_return" title="Permalink to this definition"></a></dt>
<dd><p>Compute the past return, that is the realized return, over a fix time <cite>horizon</cite> of the pd.Series <cite>x</cite>.
The past return <cite>y</cite> is defined as</p>
<div class="math notranslate nohighlight">
\[y[t] = \frac{ x[t] - x[t-horizon]}{x[t-horizon]}\]</div>
<p>If <cite>x</cite> has units of value, then <cite>y</cite> can be interpreted as an investment return.
In general, <cite>y</cite> measure the change over time horizon <cite>horizon</cite> of the quantity <cite>x</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>pd.Series.</em>) – Target data to compute the future return.</p></li>
<li><p><strong>horizon</strong> (<em>int.</em>) – Time horizon, a positive integer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pd.Series y.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>ValueError if horizon &lt;= 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynanz.indicators.stochastic">
<span class="sig-prename descclassname"><span class="pre">pynanz.indicators.</span></span><span class="sig-name descname"><span class="pre">stochastic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_low</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.Series</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_high</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.Series</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">14</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/indicators.html#stochastic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.indicators.stochastic" title="Permalink to this definition"></a></dt>
<dd><p>Compute the stochastic indicator as well as a smoothed version (ema of span period/3). The stochastic indicator
is defined as</p>
<div class="math notranslate nohighlight">
\[y[t] = 100.0 \frac{x[t] - \min(x_{low}[t-period+1:])}{\max(x_{high}[t-period+1:]) - \min(x_{low}[t-period+1:])}\]</div>
<p>If you don’t have access to a separate data for the low/high records of your data, the function uses the data
itself to compute them. For financial data, where high/low values are reached within a trading period, this might
not be optimal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>pd.Series</em>) – Target data to compute the stochastic indicator.</p></li>
<li><p><strong>x_low</strong> (<em>pd.Series</em>) – Minimum value of target data to compute the stochastic indicator.</p></li>
<li><p><strong>x_high</strong> (<em>pd.Series</em>) – Maximum value of target data to compute the stochastic indicator.</p></li>
<li><p><strong>period</strong> (<em>int</em>) – Period over which the stochastic indicator is computed. Default=14.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple (stochastic, stochastic_smoothed).</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pynanz.indicators.test_func">
<span class="sig-prename descclassname"><span class="pre">pynanz.indicators.</span></span><span class="sig-name descname"><span class="pre">test_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pynanz/indicators.html#test_func"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pynanz.indicators.test_func" title="Permalink to this definition"></a></dt>
<dd><p>This function will try to calculate:</p>
<div class="math notranslate nohighlight">
\[\sum_{i=1}^{\infty} x_{i}\]</div>
<p>good luck!</p>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Pynanz’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Leandro Salemi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>